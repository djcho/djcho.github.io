---
title : "[JPA] JPA ì‹œì‘í•˜ê¸°#1"
categories:
- JPA
tag :
- [Java, ORM, JPA]
toc: true
toc_sticky : true
published : true
date : 2022-12-25 00:00:00
last_modified_at : 2022-12-25 00:00:00
---





ê¹€ì˜í•œë‹˜ì´ ì§€ìŒ, [ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°] ì±…ì„ ì½ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ“¢
{: .notice--warning}



# JPA ì‹œì‘í•˜ê¸°

## MariaDB ì„¤ì¹˜ - macOS

macOSì—ì„œ MariaDBë¥¼ ì„¤ì¹˜í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ ë°©ë²•ì€ homebrewë¥¼ í†µí•´ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ë‹¤.  <a href="https://brew.sh/index_ko" target="_blank">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì—¬ homebrewë¥¼ ì„¤ì¹˜í•œë‹¤.

Homebrew ì„¤ì¹˜ í›„ì—ëŠ” MariaDB Server ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜ ê°€ëŠ¥í•˜ë‹¤.

```
brew install mariadb
```

ì„¤ì¹˜ í›„ì—ëŠ” ë‹¤ìŒìœ¼ë¡œ MariaDB Serverë¥¼ ì‹œì‘í•œë‹¤.

```
mysql.server start
```

> **ğŸ’¡Tip.**
>
> ì‹œìŠ¤í…œ ì‹œì‘ ì‹œ MariaDB Server ê°€ ìë™ ì‹œì‘í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ Homebrew ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤. ì´ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ì€ [launchd](https://mariadb.com/kb/en/launchd/) ì˜ launchctl ìœ í‹¸ë¦¬í‹°ë¥¼ ì´ìš©í•œë‹¤.
>
> ```
> brew services start mariadb
> ```



## ì¸í…”ë¦¬ì œì´ í”„ë¡œì íŠ¸ ìƒì„±

[íŒŒì¼]>[ìƒˆë¡œ ë§Œë“¤ê¸°]>[ìƒˆ í”„ë¡œì íŠ¸] ë©”ë‰´ë¥¼ ì„ íƒí•´ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•œë‹¤.

<p align="center">
  <img alt="img-name" src="https://user-images.githubusercontent.com/13410737/210160285-f286c544-d5d0-4463-9589-fa5945216080.png">
  <br>
    <em>í”„ë¡œì íŠ¸ ìƒì„±</em>
</p>


## ì¢…ì†ì„± ì„¤ì •

JPAë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” hibranate ì¢…ì†ì„±ì´ í•„ìš”í•˜ê³ , MariaDB ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê¸°ìœ„í•´ mariadb.jdbc ë¥¼ `pom.xml`ì— ì¶”ê°€í•œë‹¤.

(gradle í”„ë¡œì íŠ¸ì¼ ê²½ìš°ì—ëŠ” build.gradleì— ì¶”ê°€) 

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.example</groupId>
    <artifactId>hello-jpa</artifactId>
    <version>1.0-SNAPSHOT</version>
    .. ì¤‘ëµ ...
    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>5.6.14.Final</version>
        </dependency>
        <dependency>
            <groupId>org.mariadb.jdbc</groupId>
            <artifactId>mariadb-java-client</artifactId>
            <version>3.0.6</version>
        </dependency>
    </dependencies>
</project>
```



## Persistence.xml ì„¤ì •

í”„ë¡œì íŠ¸ê°€ ìƒì„± ë˜ì—ˆë‹¤ë©´ JPAëŠ” persistence.xmlì„ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ì„¤ì • ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. JPAê°€ MariaDBì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ì•„ë˜ì™€ ê°™ì´ META-INF/ í´ë” í•˜ìœ„ì— persistence.xml íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ìì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•œë‹¤.

```xml
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://xmlns.jcp.org/xml/ns/persistence" version="2.1">
    <persistence-unit name="jpatjpa">
        <properties>
            <!--í•„ìˆ˜ ì†ì„±-->
            <property name="javax.persistence.jdbc.driver" value="org.mariadb.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.user" value="{DBìœ ì €ëª…}"/>
            <property name="javax.persistence.jdbc.password" value="{DBë¹„ë°€ë²ˆí˜¸}"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:mariadb://localhost:3306/JPA_TEST"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MariaDBDialect"/>

            <!--ì˜µì…˜-->
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.use_sql_comments" value="true"/>
        </properties>
    </persistence-unit>
</persistence>
```

- `persistence` : XML ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ì‚¬ìš©í•  JPAë²„ì „ ëª…ì‹œ
- `persistence-unit` 
    - ì¼ë°˜ì ìœ¼ë¡œ ì—°ê²°í•  ë°ì´í„°ë² ì´ìŠ¤ë‹¹ í•˜ë‚˜ì˜ ì˜ì†ì„± ìœ ë‹›(Persistence-unit)ì„ ë“±ë¡
    - ì˜ì†ì„± ìœ ë‹›ì—ëŠ” ê³ ìœ í•œ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•¨(`hellojpa`)
- í”„ë¡œí¼í‹° ì†ì„±
    - JPA í‘œì¤€ ì†ì„±
        - `javax.persistence.jdbc.driver` : JDBC ë“œë¼ì´ë²„
        - `javax.persistence.jdbc.user` : ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ì•„ì´ë””
        - `javax.persistence.jdbc.password` : ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† ë¹„ë°€ë²ˆí˜¸
        - `javax.persistence.jdbc.url` : ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì† URL
    - í•˜ì´ë²„ë„¤ì´íŠ¸ ì†ì„±
        - `hibernate.show_sql` : í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì‹¤í–‰í•œ SQLì„ ì¶œë ¥í•˜ëŠ” ì„¤ì •
        - `hibernate.format_sql` : í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì‹¤í–‰í•œ SQLì„ ì¶œë ¥í•  ë•Œ ì •ë ¬ ì—¬ë¶€ë¥¼ ì„¤ì •
        - `hibernate.dialect` : ë°ì´í„°ë² ì´ìŠ¤ ë°©ì–¸(Dialect)ì„¤ì •



ìµœì¢… í”„ë¡œì íŠ¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

<p align="center">
  <img alt="img-name" src="https://user-images.githubusercontent.com/13410737/210160379-c6957d4c-ee5b-4da3-b58c-1e58deb22c63.png">
  <br>
    <em>í”„ë¡œì íŠ¸ êµ¬ì¡°</em>
</p>


## ê°ì²´ ë§¤í•‘

<p align="center">
  <img alt="img-name" src="https://user-images.githubusercontent.com/13410737/210160933-1f1816b2-0a7f-493c-a0f3-7b10a9d21e12.png">
  <br>
    <em>í´ë˜ìŠ¤ì™€ í…Œì´ë¸”ì˜ ë§¤í•‘</em>
</p>

ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ìë°” í´ë˜ìŠ¤ì™€ í…Œì´ë¸”ì„ ë§¤í•‘í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤ì™€ íšŒì› í…Œì´ë¸”ì„ ìƒì„±í•œë‹¤.

```sql
CREATE DATABASE JPA_TEST;
CREATE TABLE MEMBER
(
    ID   VARCHAR(255) NOT NULL,
    NAME VARCHAR(255),
    AGE  INT,
    PRIMARY KEY (ID)
);
```

íšŒì› í´ë˜ìŠ¤ íŒŒì¼ ìƒì„±í•œë‹¤.

```java
package org.example;

import javax.persistence.*;

@Entity
@Table(name="MEMBER")
public class Member {
    public Member(){
    }

    @Id
    @Column(name = "ID")
    private String id;

    @Column(name = "NAME")
    private String username;

    //ë§¤í•‘ ì •ë³´ê°€ ì—†ëŠ” í•„ë“œ
    private Integer age;

    //Getter, Setter
    public String getId() {
        return this.id;
    }
    public void setId(String id){
        this.id = id;
    }
    public String getUsername() {
        return this.username;
    }
    public void setUsername(String username){
        this.username = username;
    }
    public Integer getAge(){
        return this.age;
    }
    public void setAge(Integer age){
        this.age = age;
    }
}
```

**@Entity**

- ì´ í´ë˜ìŠ¤ë¥¼ í…Œì´ë¸”ê³¼ íŒ¨ë°í•œë‹¤ê³  JPAì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
- `@Entity`ê°€ ì‚¬ìš©ëœ í´ë˜ìŠ¤ë¥¼ ì—”í‹°í‹° í´ë˜ìŠ¤ë¼ ë¶€ë¦„

**@Table**

- ì—”í‹°í‹° í´ë˜ìŠ¤ì— íŒ¨ë°í•  í…Œì´ë¸” ì •ë³´ë¥¼ JPAì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
- ìƒëµ ì‹œ í´ë˜ìŠ¤ ì´ë¦„ì„ í…Œì´ë¸” ì´ë¦„ìœ¼ë¡œ ë§¤í•‘

**@Id**

- ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ í•„ë“œë¥¼ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤(Primary Key)ì— ë§¤í•‘í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
- `@Id`ê°€ ì‚¬ìš©ëœ í•„ë“œë¥¼ ì‹ë³„ì í•„ë“œë¼ í•¨

**@Column**

- í•„ë“œë¥¼ ì»¬ëŸ¼ì— ë§¤í•‘í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
- ìƒëµ ì‹œ í•„ë“œëª…ì„ ì‚¬ìš©í•˜ì—¬ ì»¬ëŸ¼ëª…ìœ¼ë¡œ ë§¤í•‘



ì´ì œ JPAë¥¼ ì‹œì‘í•  ì¤€ë¹„ê°€ ëë‚¬ë‹¤.
