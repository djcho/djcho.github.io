---
title : "[JPA] ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„"
categories:
- JPA
tag :
- [Java, ORM, JPA, Hibernate, Relationship]
toc: true
toc_sticky : true
published : true
date : 2023-01-11 00:00:00
last_modified_at : 2023-01-11 00:00:00
---

ê¹€ì˜í•œë‹˜ì´ ì§€ìŒ, [ìë°” ORM í‘œì¤€ JPA í”„ë¡œê·¸ë˜ë°] ì±…ì„ ì½ê³  ì •ë¦¬í•œ í•„ê¸°ì…ë‹ˆë‹¤.ğŸ“¢
{: .notice--warning}

# ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„

<p align="center">
  <img alt="img-name" src="https://user-images.githubusercontent.com/13410737/211839230-f43fa9ca-7a0e-4487-8414-55481d3fbaf0.png">
  <br>
    <em>ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„</em>
</p>

- ê°ì²´ ì—°ê´€ê´€ê³„ : ì¼ëŒ€ë‹¤ ê´€ê³„ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì»¬ë ‰ì…˜ ì‚¬ìš©
- í…Œì´ë¸” ì—°ê´€ê´€ê³„ : ì™¸ë˜ í‚¤ í•˜ë‚˜ë§Œìœ¼ë¡œ ì–‘ë°©í–¥ ì¡°íšŒ ê°€ëŠ¥, ì¶”ê°€í•  ë‚´ìš© ì—†ìŒ



## ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ë§¤í•‘

**íšŒì› ì—”í‹°í‹°**

```java
@Entity
public class Member {
    @Id
    @Column(name = "MEMBER_ID")
    private String id;

    @Column(name = "NAME", nullable = false, length = 10)
    private String username;

    @ManyToOne
    @JoinColumn(name = "TEAM_ID")
    private Team team;
  
    //ì—°ê´€ê´€ê³„ ì„¤ì •
    public void setTeam(Team team){
        this.team = team;
    }
    //Getter, Setter...
    public void setTeam(Team team) {
        this.team = team;
        team.getMembers().add(this); //Memberê°€ ì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œ team ë‚´ë¶€ memberlistì— íšŒì›ì„ ë„£ì–´ì¤˜ì•¼ í•¨
    }
}
```

**íŒ€ ì—”í‹°í‹°**

```java
@Entity
public class Team {
    @Id
    @Column(name = "TEAM_ID")
    private String id;

    private String name;

    //==ì¶”ê°€==//
    @OneToMany(mappedBy = "team")
    private List<Member> members = new ArrayList<>();
    
    //Getter, Setter ...
}
```

`mappedBy` ì†ì„±ì€ ì–‘ë°©í–¥ ë§¤í•‘ì¼ ë•Œ ì‚¬ìš©í•˜ëŠ”ë° ë°˜ëŒ€ìª½ ë§¤í•‘ì˜ í•„ë“œ ì´ë¦„ì„ ê°’ìœ¼ë¡œ ì£¼ë©´ ëœë‹¤.



## ì¼ëŒ€ë‹¤ ì»¬ë ‰ì…˜ ì¡°íšŒ

```java
public static void biDirection(EntityManager em){
    Team team = em.find(Team.class, "team1");
    List<Member> members = team.getMembers(); //(íŒ€ -> íšŒì›)

    for(Member member : members){
      	System.out.println("member.username = " + member.getUsername());
    }
}
//==ê²°ê³¼==
//member.username = íšŒì›1
//member.username = íšŒì›2
```

ìœ„ ë°©ì‹ìœ¼ë¡œ ì»¬ë ‰ì…˜ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. 
