---
title : "[SpringBoot][Chapter6.6] DBμ—°λ™ - μ—”ν‹°ν‹° μ„¤κ³„"
categories:
- SpringBoot
tag :
- [SpringBoot, Spring, Java, Intelij]
toc: true
toc_sticky : true
published : true
date : 2022-07-23
last_modified_at : 2022-07-23
---





μ¥μ •μ°λ‹μ΄ μ§€μ, [μ¤ν”„λ§λ¶€νΈ ν•µμ‹¬κ°€μ΄λ“ :: μ¤ν”„λ§ λ¶€νΈλ¥Ό ν™μ©ν• μ• ν”λ¦¬μΌ€μ΄μ… κ°λ° μ‹¤λ¬΄] μ±…μ„ μ½κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤.π“Ά
{: .notice--warning}



## μ—”ν‹°ν‹° μ„¤κ³„

 Spring Data JPAλ¥Ό μ‚¬μ©ν•λ©΄ λ°μ΄ν„°λ² μ΄μ¤μ— ν…μ΄λΈ”μ„ μƒμ„±ν•κΈ° μ„ν•΄ μ§μ ‘ μΏΌλ¦¬λ¥Ό μ‘μ„±ν•  ν•„μ”κ°€ μ—†λ‹¤. μ΄ κΈ°λ¥μ„ κ°€λ¥ν•κ² ν•λ” κ²ƒμ΄ μ—”ν‹°ν‹°μ΄λ‹¤. JPAμ—μ„ μ—”ν‹°ν‹°λ” λ°μ΄ν„°λ² μ΄μ¤μ ν…μ΄λΈ”μ— λ€μ‘ν•λ” ν΄λμ¤μ΄λ‹¤. μ—”ν‹°ν‹°μ—λ” λ°μ΄ν„°λ² μ΄μ¤μ— μ“°μΌ ν…μ΄λΈ”κ³Ό μΉΌλΌμ„ μ •μν•λ‹¤. μ—”ν‹°ν‹°μ— μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ ν…μ΄λΈ” κ°„ μ—°κ΄€κ΄€κ³„λ¥Ό μ •μν•  μ μλ‹¤.

μ•„λ ν…μ΄λΈ”μ€ μ½”λ“λ΅ κ°„λ‹¨ν•κ² μ—”ν‹°ν‹° ν΄λμ¤λ΅ κµ¬ν„ν•  μ μλ‹¤. `data.entity` ν¨ν‚¤μ§€λ¥Ό μƒμ„±ν•κ³  κ·Έ μ•μ— `Product`μ—”ν‹°ν‹° ν΄λμ¤λ¥Ό μƒμ„±ν•λ‹¤.

![image](https://user-images.githubusercontent.com/13410737/180595294-52e8a7ff-c8ca-4d52-8b22-aca1eefe449d.png){: .align-center}

```java
package com.springboot.jpa.data.entity;

import javax.persistence.*;
import java.time.LocalDateTime;

@Entity
@Table(name = "Product")
public class Product {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long number;
    
    @Column(nullable = false)
    private String name;
    
    @Column(nullable = false)
    private Integer price;
    
    @Column(nullable = false)
    private  Integer stock;
    
    private LocalDateTime createdAt;
    private LocalDateTime updatedAt;
    
    ...getter/setter λ©”μ„λ“ μƒλµ
}
```

<br>

μ„μ™€ κ°™μ΄ ν΄λμ¤λ¥Ό μƒμ„±ν•κ³  `application.properties`μ— μ •μν• `spring.jpa.hibernate.ddl-auto`μ κ°’μ„ `create` κ°™μ€ ν…μ΄λΈ”μ„ μƒμ„±ν•λ” μµμ…μΌλ΅ μ„¤μ •ν•λ©΄ μΏΌλ¦¬λ¬Έμ„ μ‘μ„±ν•μ§€ μ•μ•„λ„ λ°μ΄ν„°λ² μ΄μ¤μ— ν…μ΄λΈ”μ΄ μλ™μΌλ΅ λ§λ“¤μ–΄μ§„λ‹¤.



### μ—”ν‹°ν‹° κ΄€λ ¨ κΈ°λ³Έ μ–΄λ…Έν…μ΄μ…

μ—”ν‹°ν‹°λ¥Ό μ‘μ„±ν•  λ•λ” μ–΄λ…Έν…μ΄μ…μ„ λ§μ΄ μ‚¬μ©ν•λ‹¤. κ·Έ μ¤‘μ—λ” ν…μ΄λΈ”κ³Ό λ§¤ν•‘ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ…λ„ μκ³ , λ‹¤λ¥Έ ν…μ΄λΈ”κ³Όμ μ—°κ΄€κ΄€κ³„λ¥Ό μ •μν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ…, μλ™μΌλ΅ κ°’μ„ μ£Όμ…ν•κΈ° μ„ν• μ–΄λ…Έν…μ΄μ…λ„ μλ‹¤. μ—¬κΈ°μ„λ” λ¨Όμ € κΈ°λ³Έμ μΌλ΅ λ§μ΄ μ‚¬μ©ν•λ” μ–΄λ…Έν…μ΄μ…μ„ μ†κ°ν•κ³ , λ‹¤λ¥Έ μ–΄λ…Έν…μ΄μ…μ€ μ΄ν›„ λ‚΄μ©μ„ μ§„ν–‰ν•λ©΄μ„ ν•„μ”ν•  λ•λ§λ‹¤ μ†κ°ν•κ² λ‹¤.



#### @Entity

ν•΄λ‹Ή ν΄λμ¤κ°€ μ—”ν‹°ν‹°μ„μ„ λ…μ‹ν•κΈ° μ„ν• μ–΄λ…Έν…μ΄μ…μ΄λ‹¤. ν΄λμ¤ μμ²΄λ” ν…μ΄λΈ”κ³Ό μΌλ€μΌλ΅ λ§¤μΉ­λλ©°, ν•΄λ‹Ή ν΄λμ¤μ μΈμ¤ν„΄μ¤λ” λ§¤ν•‘λλ” ν…μ΄λΈ”μ—μ„ ν•λ‚μ λ μ½”λ“λ¥Ό μλ―Έν•λ‹¤.



#### @Table

μ—”ν‹°ν‹° ν΄λμ¤λ” ν…μ΄λΈ”κ³Ό λ§¤ν•‘λλ―€λ΅ νΉλ³„ν• κ²½μ°κ°€ μ•„λ‹λ©΄ `@Table` μ–΄λ…Έν…μ΄μ…μ΄ ν•„μ”ν•μ§€ μ•λ‹¤. `@Table` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•  λ•λ” ν΄λμ¤μ μ΄λ¦„κ³Ό ν…μ΄λΈ”μ μ΄λ¦„μ„ λ‹¤λ¥΄κ² μ§€μ •ν•΄μ•Ό ν•λ” κ²½μ°λ‹¤. `@Table` μ–΄λ…Έν…μ΄μ…μ„ λ…μ‹ν•μ§€ μ•μΌλ©΄ ν…μ΄λΈ”μ μ΄λ¦„κ³Ό ν΄λμ¤μ μ΄λ¦„μ΄ λ™μΌν•λ‹¤λ” μλ―Έμ΄λ©°, μ„λ΅ λ‹¤λ¥Έ μ΄λ¦„μ„ μ“°λ ¤λ©΄ `@Table(name = κ°’)` ν•νƒλ΅ λ°μ΄ν„°λ² μ΄μ¤μ ν…μ΄λΈ”λ…μ„ λ…μ‹ν•΄μ•Ό ν•λ‹¤. λ€μ²΄λ΅ μλ°”μ λ…λ…λ²•κ³Ό λ°μ΄ν„°λ² μ΄μ¤κ°€ μ‚¬μ©ν•λ” λ…λ…λ²•μ΄ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— μμ£Ό μ‚¬μ©λλ‹¤.



#### @Id

μ—”ν‹°ν‹° ν΄λμ¤μ ν•„λ“λ” ν…μ΄λΈ”μ μΉΌλΌκ³Ό λ§¤ν•‘λλ‹¤. `@Id` μ–΄λ…Έν…μ΄μ…μ΄ μ„ μ–Έλ ν•„λ“λ” ν…μ΄λΈ”μ κΈ°λ³Έκ°’ μ—­ν• λ΅ μ‚¬μ©λλ‹¤. λ¨λ“  μ—”ν‹°ν‹°λ” `@Id` μ–΄λ…Έν…μ΄μ…μ΄ ν•„μ”ν•λ‹¤. 



#### @GeneratedValue

μΌλ°μ μΌλ΅ `@Id` μ–΄λ…Έν…μ΄μ…κ³Ό ν•¨κ» μ‚¬μ©λλ‹¤. μ΄ μ–΄λ…Έν…μ΄μ…μ€ ν•΄λ‹Ή ν•„λ“μ κ°’μ„ μ–΄λ–¤ λ°©μ‹μΌλ΅ μλ™μΌλ΅ μƒμ„±ν• μ§€ κ²°μ •ν•  λ• μ‚¬μ©λλ‹¤. κ°’ μƒμ„± λ°©μ‹μ€ λ‹¤μκ³Ό κ°™λ‹¤.

##### GeneratedValueλ¥Ό μ‚¬μ©ν•μ§€ μ•μ€ λ°©μ‹(μ§μ ‘ ν• λ‹Ή)

- μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μμ²΄μ μΌλ΅ κ³ μ ν• κΈ°λ³Έκ°’μ„ μƒμ„±ν•  κ²½μ° μ‚¬μ©ν•λ” λ°©μ‹
- λ‚΄λ¶€μ— μ •ν•΄μ§„ κ·μΉ™μ— μν•΄ κΈ°λ³Έκ°’μ„ μƒμ„±ν•κ³  μ‹λ³„μλ΅ μ‚¬μ©

##### Auto

- `@GeneratedValue`μ κΈ°λ³Έ μ„¤μ •κ°’
- κΈ°λ³Έκ°’μ„ μ‚¬μ©ν•λ” λ°μ΄ν„°λ² μ΄μ¤μ— λ§κ² μλ™ μƒμ„±ν•λ‹¤.

##### IDENTITY

- κΈ°λ³Έκ°’ μƒμ„±μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ„μ„ν•λ” λ°©μ‹
- λ°μ΄ν„°λ² μ΄μ¤μ AUTO_INCREMENTλ¥Ό μ‚¬μ©ν•΄ κΈ°λ³Έκ°’μ„ μƒμ„±ν•λ‹¤.

##### SEQUENCE

- `@SquenceGenerator` μ–΄λ…Έν…μ΄μ…μΌλ΅ μ‹λ³„μ μƒμ„±κΈ°λ¥Ό μ„¤μ •ν•κ³  μ΄λ¥Ό ν†µν•΄ κ°’μ„ μλ™ μ£Όμ…λ°›λ”λ‹¤.
- `SequenceGenerator`λ¥Ό μ •μν•  λ•λ” `name`, `sequenceName`, `allocationSize`λ¥Ό ν™μ©ν•λ‹¤.
- `@GeneratedValue`μ— μƒμ„±κΈ°λ¥Ό μ„¤μ •ν•λ‹¤.

##### TABLE

- μ–΄λ–¤ DBMSλ¥Ό μ‚¬μ©ν•λ”λΌλ„ λ™μΌν•κ² λ™μ‘ν•κΈ°λ¥Ό μ›ν•  κ²½μ° μ‚¬μ©ν•λ‹¤.
- μ‹λ³„μλ΅ μ‚¬μ©ν•  μ«μμ λ³΄κ΄€ ν…μ΄λΈ”μ„ λ³„λ„λ΅ μƒμ„±ν•΄μ„ μ—”ν‹°ν‹°λ¥Ό μƒμ„±ν•  λ•λ§λ‹¤ κ°’μ„ κ°±μ‹ ν•λ©° μ‚¬μ©ν•λ‹¤.
- `@TableGenerator` μ–΄λ…Έν…μ΄μ…μΌλ΅ ν…μ΄λΈ” μ •λ³΄λ¥Ό μ„¤μ •ν•λ‹¤.



#### @Column

μ—”ν‹°ν‹° ν΄λμ¤μ ν•„λ“λ” μλ™μΌλ΅ ν…μ΄λΈ” μΉΌλΌμΌλ΅ λ§¤ν•‘λλ‹¤. κ·Έλμ„ λ³„λ‹¤λ¥Έ μ„¤μ •μ„ ν•μ§€ μ•μ„ μμ •μ΄λΌλ©΄ μ΄ μ–΄λ…Έν…μ΄μ…μ„ λ…μ‹ν•μ§€ μ•μ•„λ„ κ΄μ°®λ‹¤. `@Column`μ–΄λ…Έν…μ΄μ…μ€ μ•„λμ™€ κ°™μ΄ ν•„λ“μ— λ‡ κ°€μ§€ μ„¤μ •μ„ λ”ν•  λ• μ‚¬μ©ν•λ‹¤.

<br>

![image](https://user-images.githubusercontent.com/13410737/180595898-350e2c8a-5e5d-4a43-8376-c44dd1883893.png){: .align-center}

<br>

`@Column` μ–΄λ…Έν…μ΄μ…μ—μ„ λ§μ΄ μ‚¬μ©ν•λ” μ”μ†λ” λ‹¤μκ³Ό κ°™λ‹¤.

- `name` : λ°μ΄ν„°λ² μ΄μ¤μ μ»¬λΌλ…μ„ μ„¤μ •ν•λ” μ†μ„±μ΄λ‹¤. λ…μ‹ν•μ§€ μ•μΌλ©΄ ν•„λ“λ…μΌλ΅ μ§€μ •λλ‹¤.
- `nullable` : λ μ½”λ“λ¥Ό μƒμ„±ν•  λ• μ»¬λΌ κ°’μ— null μ²λ¦¬κ°€ κ°€λ¥ν•μ§€λ¥Ό λ…μ‹ν•λ” μ†μ„±μ΄λ‹¤.
- `length` : λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•λ” λ°μ΄ν„°μ μµλ€ κΈΈμ΄λ¥Ό μ„¤μ •ν•λ‹¤.
- `unique` : ν•΄λ‹Ή μ»¬λΌμ„ μ λ‹ν¬λ΅ μ„¤μ •ν•λ‹¤.



#### @Transient

μ—”ν‹°ν‹° ν΄λμ¤μ—λ” μ„ μ–ΈλΌ μλ” ν•„λ“μ§€λ§ λ°μ΄ν„°λ² μ΄μ¤μ—μ„λ” ν•„μ” μ—†μ„ κ²½μ° μ΄ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μ΄μ©ν•μ§€ μ•κ² ν•  μ μλ‹¤.

