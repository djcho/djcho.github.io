---
title : "[SpringBoot][Chapter2.3] 기초 지식 - 레이어드 아키텍처"
categories:
- SpringBoot
tag :
- [SpringBoot, Spring, Java]
toc: true
toc_sticky : true
published : true
date : 2022-07-16
last_modified_at : 2022-07-16
---





장정우님이 지음, [스프링부트 핵심가이드 :: 스프링 부트를 활용한 애플리케이션 개발 실무] 책을 읽고 정리한 필기입니다.📢
{: .notice--warning}



## 레이어드 아키텍처

레이어드 아키텍처(Layerd Architecture)란 애플리케이션의 컴포넌트를 유사 관심사를 기준으로 레이어로 묶어 수평적으로 구성한 구조를 의미한다. 에이어드 아키텍처는 여러 방면에서 쓰이는 개념이며 어떻게 설계하느냐에 따라 용어와 계층의 수가 달라딘다. 일반적으로 레이어드 아키텍처라 하면 3계층 또는 4계층 구성을 의미하는데 이 차이는 인프라(데이터 베이스)레이어의 추가 여부로 결정된다. 

<br>

![image](https://user-images.githubusercontent.com/13410737/179356109-f104a036-004e-4744-8712-54cfb6b63034.png){: .align-center}

<br>

#### 프레젠테이션 계층

- 애플리케이션의 최상단 계층으로, 클라이언트의 요청을 해석하고 응답하는 역할이다.
- UI나 API를 제공한다.
- 프레젠테이션 계층은 별도의 비즈니스 로직을 포함하고 있지 않으므로 비즈니스 계청으로 요청을 위임하고 받은 결과를 응답하는 역할만 수행한다.

#### 비즈니스 계층

- 애플리케이션이 제공하는 기능을 정의하고 세부 작업을 수행하는 도메인 객체를 통해 업무를 위임하는 역할을 수행한다.
- DDD(Domain-Driven-Design) 기반의 아키텍처에서는 비즈니스 로직에 도메인이 포함되기도 하고, 별도로 도메인 계층을 두기도 한다.

#### 데이터 접근 계층

- 데이터베이스에 접근하는 일련의 작업을 수행한다.

<br>

레이어드 아키텍처는 하나의 애플리케이션에도 적용되지만 애플리케이션 간의 관계를 설명하는 데도 사용할 수 있다. 레이어드 아키텍처 기반 설계는 다음과 같은 특징이 있다.

- 각 레이어는 가장 가까운 하위 레이어의 의존성을 주입받는다.
- 각 레이어는 관심사에 따라 묶여 있으며, 다른 레이어의 역할을 침범하지 않는다.
  - 각 컴포넌트의 역할이 명확하므로 코드의 가독성과 기능 구현에 유리하다.
  - 코드의 확장성도 좋아진다.
- 각 레이어가 독립적으로 작성되면 다른 레이어와의 의존성을 낮춰 단위 테스트에 용이하다.
- <br>


### 스프링 부트의 레이어드 아키텍처

스프링 부트는 별도의 설정 없이 spring-boot-starter-web 의 의존성을 사용할 때는 기본적으로 스프링 MVC 구조를 띠게 되며, 대체로 아래와 같은 레이어드 아키텍처를 이룬다.

<br>

![image](https://user-images.githubusercontent.com/13410737/179356088-deb4dd3b-b062-4b5b-8d71-452a890bb2fd.png){: .align-center}

<br>

Spring MVC는 Model-View-Controller 의 구조로 View와 Controller는 프레젠테이션 계층 영역이며, Model은 비즈니스와 데이터 접근 계층의 영역으로 구분할 수 있다. 다만 스프링 MVC 모델로 레이어드 아키텍처를 구현하기 위해서는 역할을 세분화한다. 비즈니스 계층에 서비스를 배치해 엔티티와 같은 도메인 객체의 비즈니스 로직을 조합하도록 하고 데이터 접근 계층에는 DAO(Spring Data JPA에서는 Repository)를 배치해 도메인을 관리한다.

스프링의 레이어드 아키텍처는 다음과 같이 설명할 수 있다. 

<br>

#### 프레젠테이션 계층

- 상황에 따라 유저 인터페이스(UI; User Interface) 계층이라고도 한다.
- 클라이언트와의 접점이 된다.
- 클라이언트로부터 데이터와 함께 요청을 받고 처리 결과를 응답으로 전달하는 역할이다.

#### 비즈니스 계층

- 상황에 따라 서비스(Service) 계층이라고도 한다.
- 핵심 비즈니스 로직을 구현하는 영역이다.
- 트랜잭션 처리나 유효성 검사 등의 작업도 수행한다.

#### 데이터접근 계층

- 상황에 따라 영속(Persistence) 계층이라고도 한다.
- 데이터베이스에 접근해야 하는 작업을 수행한다.
- 위 그림에서는 DAO라는 컴포넌트를 표현했지만 Spring Data JPA에서는 DAO 역할을 리포지토리가 수행하기 때문에 리포지토리로 대체할 수 있다.

> 레이어드 아키텍처는 일반적인 계층 구조를 기반으로 필요에 따라 조금씩 변형해 사용한다. 가장 중요한 부분은 비즈니스 계층 역역인데, 비즈니스 로직을 어디서 담당할지 결정하고 설계하는 것이 좋다. 비즈니스 로직은 도메인 계층에서 담당하는 것이 일반적이다.
>
> 스프링에서 JPA를 사용하면 @Entity를 정의한 클래스가 도메인 객체가 되며,  이곳에서 비즈니스 로직을 설계하면 좋다. 다만 서비스 레이어에서 비즈니스 로직을 담당하는 경우도 있으므로 이러한 역할과 책임을 잘 구분해서 설계해야 한다. 상황에 맞는 설계 방식을 알아두면 동료와의 협업도 수월해진다.

