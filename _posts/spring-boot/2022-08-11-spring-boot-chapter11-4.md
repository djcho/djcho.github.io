---
title : "[SpringBoot][Chapter11.4] μ•΅μ¶”μ—μ΄ν„° - μ•΅μ¶”μ—μ΄ν„° μ»¤μ¤ν…€ κΈ°λ¥ λ§λ“¤κΈ°"
categories:
- SpringBoot
tag :
- [SpringBoot, Spring, Java, Intelij, Actuator]
toc: true
toc_sticky : true
published : true
date : 2022-08-11
last_modified_at : 2022-08-11
---





μ¥μ •μ°λ‹μ΄ μ§€μ, [μ¤ν”„λ§λ¶€νΈ ν•µμ‹¬κ°€μ΄λ“ :: μ¤ν”„λ§ λ¶€νΈλ¥Ό ν™μ©ν• μ• ν”λ¦¬μΌ€μ΄μ… κ°λ° μ‹¤λ¬΄] μ±…μ„ μ½κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤.π“Ά
{: .notice--warning}





## μ•΅μ¶”μ—μ΄ν„° μ»¤μ¤ν…€ κΈ°λ¥ λ§λ“¤κΈ°

μ•μ—μ„ μ‚΄ν΄λ΄¤λ“―μ΄ μ•΅μ¶”μ—μ΄ν„°λ” λ‹¤μ–‘ν• μ •λ³΄λ¥Ό κ°€κ³µν•΄μ„ μ κ³µν•λ‹¤. κ·Έ λ°–μ— κ°λ°μμ μ”κµ¬μ‚¬ν•­μ— λ§μ¶ μ»¤μ¤ν…€ κΈ°λ¥ μ„¤μ •λ„ μ κ³µν•λ‹¤. μ»¤μ¤ν…€ κΈ°λ¥μ„ κ°λ°ν•λ” λ°©μ‹μ—λ” ν¬κ² λ‘ κ°€μ§€κ°€ μλ‹¤. μ²« λ²μ§Έλ” κΈ°μ΅΄ κΈ°λ¥μ— λ‚΄μ©μ„ μ¶”κ°€ν•λ” λ°©μ‹μ΄κ³ , λ‘ λ²μ§Έλ” μƒλ΅μ΄ μ—”λ“ν¬μΈνΈλ¥Ό κ°λ°ν•λ” λ°©μ‹μ΄λ‹¤.



#### μ •λ³΄ μ κ³µ μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄ μƒμ„±

μ•΅μ¶”μ—μ΄ν„°λ¥Ό μ»¤μ¤ν„°λ§μ΄μ§•ν•λ” κ°€μ¥ κ°„λ‹¨ν• λ°©λ²•μ€ μ•μ—μ„ `/info` μ—”λ“ν¬μΈνΈμ λ‚΄μ©μ„ μ¶”κ°€ν• κ²ƒμ²λΌ `application.properties` νμΌ λ‚΄μ— λ‚΄μ©μ„ μ¶”κ°€ν•λ” κ²ƒμ΄λ‹¤. κ·Έλ¬λ‚ μ΄ λ°©λ²•μ€ λ§μ€ λ‚΄μ©μ„ λ‹΄μ„ λ•λ” κ΄€λ¦¬ μΈ΅λ©΄μ΄ μΆ‹μ§€ μ•λ‹¤.

κ·Έλμ„ μ»¤μ¤ν…€ κΈ°λ¥μ„ μ„¤μ •ν•  λ•λ” λ³„λ„μ κµ¬ν„μ²΄ ν΄λμ¤λ¥Ό μ‘μ„±ν•΄μ„ λ‚΄μ©μ„ μ¶”κ°€ν•λ” λ°©λ²•μ„ λ§μ΄ ν™μ©λλ‹¤. μ•΅μ¶”μ—μ΄ν„°μ—μ„λ” `InfoContributor` μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•κ³  μλ”λ°, μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤λ¥Ό μƒμ„±ν•λ©΄ λλ‹¤. μ•„λμ™€ κ°™μ΄ `InfoContributor` μΈν„°νμ΄μ¤μ— λ€ν• κµ¬ν„ ν΄λμ¤λ¥Ό μƒμ„±ν•λ‹¤.

<br>

```java
@Component
public class CustomInfoContributor implements InfoContributor {
    @Override
    public void contribute(Info.Builder builder) {
        Map<String, Object> content = new HashMap<>();
        content.put("code-info", "InfoContributor κµ¬ν„μ²΄μ—μ„ μ •μν• μ •λ³΄μ…λ‹λ‹¤.");
        builder.withDetail("custom-info-contributor", content);
    }
}
```

<br>

μƒλ΅ μƒμ„±ν• ν΄λμ¤λ¥Ό `InfoContributor` μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄λ΅ μ„¤μ •ν•λ©΄ `contributor` λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ”©ν•  μ μκ² λλ‹¤. μ΄ λ©”μ„λ“μ—μ„ νλΌλ―Έν„°λ΅ λ°›μ€ `Builder`κ°μ²΄λ” μ•΅μ¶”μ—μ΄ν„° ν¨ν‚¤μ§€μ `Info`ν΄λμ¤ μ•μ— μ •μλΌ μλ” ν΄λμ¤λ΅μ„ `info` μ—”λ“ν¬μΈνΈμ—μ„ λ³΄μ—¬μ¤„ λ‚΄μ©μ„ λ‹΄λ” μ—­ν• μ„ μν–‰ν•λ‹¤. μ΄λ ‡κ² κ°μ²΄λ¥Ό κ°€μ Έμ™€ 6~8λ² μ¤„μ²λΌ μ½ν…μΈ λ¥Ό λ‹΄μ•„ `builder`μ— ν¬ν•¨ν•λ©΄ μ—”λ“ν¬μΈνΈ μ¶λ ¥ κ²°κ³Όμ—μ„ ν™•μΈν•  μ μλ‹¤. μ•„λμ™€ κ°™μ΄ μ„¤μ •ν• ν›„ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ¬κ°€λ™ν•΄μ„ μ—”λ“ν¬μΈνΈλ¥Ό νΈμ¶ν•λ©΄ μ•„λμ™€ κ°™μ€ κ²°κ³Όλ¥Ό λ³Ό μ μλ‹¤.

<br>

```json
{
  "organization":{
    "name":"wikibooks"
  },
  "contact":{
    "email":"thinkground.flature@email.com",
    "phoneNumber":"010-1234-5678"
  },
  "custom-info-contributor":{
    "code-info":"InfoContributor κµ¬ν„μ²΄μ—μ„ μ •μν• μ •λ³΄μ…λ‹λ‹¤."
  }
}
```

<br>

λ³΄λ‹¤μ‹ν”Ό κΈ°μ΅΄ `application.properties` μ—μ„ μ •μν–λ μ†μ„±κ°’μ„ λΉ„λ΅―ν•΄ κµ¬ν„μ²΄ ν΄λμ¤μ—μ„ ν¬ν•¨ν• λ‚΄μ©μ΄ μ¶”κ°€λ κ²ƒμ„ λ³Ό μ μλ‹¤.



### μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈ μƒμ„±

`@EndPoint` μ–΄λ…Έν…μ΄μ…μΌλ΅ λΉμ— μ¶”κ°€λ κ°μ²΄λ“¤μ€ `@ReadOperation`, `@WriteOperation`, `@DeleteOperation` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ JMXλ‚ HTTPλ¥Ό ν†µν•΄ μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈλ¥Ό λ…Έμ¶μ‹ν‚¬ μ μλ‹¤. λ§μ•½ JMXμ—μ„λ§ μ‚¬μ©ν•κ±°λ‚ HTTPμ—μ„λ§ μ‚¬μ©ν•λ” κ²ƒμ„ μ ν•ν•κ³  μ‹¶λ‹¤λ©΄ `@JmxEndpoint`, `@WebEndpoint` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

μ΄ μ±…μ—μ„λ” κ°„λ‹¨ν•κ² μ• ν”λ¦¬μΌ€μ΄μ…μ— λ©”λ¨ κΈ°λ΅μ„ λ‚¨κΈΈ μ μλ” κΈ°λ¥μ„ μ—”λ“ν¬μΈνΈλ΅ μƒμ„±ν•κ² λ‹¤. μ•„λμ™€ κ°™μ΄ μ—”λ“ν¬μΈνΈ ν΄λμ¤λ¥Ό μƒμ„±ν•λ‹¤.

```java
@Component
@Endpoint(id = "note")
public class NoteEndpoint {
    
    private Map<String, Object> noteContent = new HashMap<>();
    
    @ReadOperation
    public Map<String, Object> getNote(){
        return noteContent;
    }
    
    @WriteOperation
    public Map<String, Object> writeNote(String key, Object value){
        noteContent.put(key, value);
        return noteContent;
    }
    
    @DeleteOperation
    public Map<String, Object> deleteNote(String key){
        noteContent.remove(key);
        return noteContent;
    }
}
```

<br>

μ„ μ½”λ“μ 2λ² μ¤„μ—μ„λ” `@Endpoint` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κ³  μλ‹¤. μ΄ μ–΄λ…Έν…μ΄μ…μ„ μ„ μ–Έν•λ©΄ μ•΅μ¶”μ—μ΄ν„°μ— μ—”λ“ν¬μΈνΈλ΅ μλ™μΌλ΅ λ“±λ΅λλ©° `id` μ†μ„±κ°’μΌλ΅ κ²½λ΅λ¥Ό μ •μν•  μ μλ‹¤. λν• `enableByDefault`λΌλ” μ†μ„±μΌλ΅ ν„μ¬ μƒμ„±ν•λ” μ—”λ“ν¬μΈνΈμ κΈ°λ³Έ ν™μ„±ν™” μ—¬λ¶€λ„ μ„¤μ • κ°€λ¥ν•λ‹¤. `enableByDefault`μ†μ„±μ κΈ°λ³Έκ°’μ€ `true`λ΅μ„ κ°’μ„ λ³„λ„λ΅ μ„¤μ •ν•μ§€ μ•μΌλ©΄ ν™μ„±ν™”λλ‹¤.

μ—”λ“ν¬μΈνΈλ¥Ό μ„¤μ •ν•λ” ν΄λμ¤μ—λ” `@ReadOpertation`, `@WriteOperation`, `@DeleteOperation` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ κ° λ™μ‘ λ©”μ„λ“λ¥Ό μƒμ„±ν•  μ μλ‹¤.

7~10λ² μ¤„μ—μ„λ” `@ReadOperation` μ–΄λ…Έν…μ΄μ…μ„ μ •μν•΄ HTTP, GET μ”μ²­μ„ λ°μ‘ν•λ” λ©”μ„λ“λ¥Ό μƒμ„±ν–λ‹¤. μ΄ ν΄λμ¤μ—μ„λ” `noteContent`λΌκ³  ν•λ” `Map`νƒ€μ…μ κ°μ²΄λ¥Ό μ „λ‹¬ν•κ³  μλ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…”μ„ μ¬κ°€λ™ν• ν›„ λ‹¤μ μ—”λ“ν¬μΈνΈλ¥Ό νΈμ¶ν•΄ λ³΄κ² λ‹¤.

<br>

------

<a href="http://localhost:8080/actuator/note">`http://localhost:8080/actuator/note`</a>

------

```json
{}
```

<br>

λ³΄λ‹¤μ‹ν”Ό μ•„μ§ κ°’μ„ λ„£μ§€ μ•μ€ μƒνƒλΌμ„ JSON ν•νƒμ λΉ κ°’μ΄ ν‘ν„λλ‹¤. κ·ΈλΌ `@WriteOperation` λ™μ‘μ„ ν™•μΈν•κΈ° μ„ν•΄ μ•„λμ™€ κ°™μ΄ Talend API Testerλ¥Ό POSTνΈμ¶μ„ μ‹λ„ν•λ‹¤.

<br>

![image](https://user-images.githubusercontent.com/13410737/183940337-d3879208-66eb-4433-bca6-c4390c7a5dcc.png){: .align-center}

<br>

μ„μ™€ κ°™μ΄ λ©”μ„λ“μ—μ„ λ°›κ³ μ ν•λ” νλΌλ―Έν„°μ μ΄λ¦„μ„ JSONμ ν‚¤ κ°’μΌλ΅ μ„¤μ •ν•κ³ , κ·Έμ— ν•΄λ‹Ήν•λ” κ°’μ„ ν›„κ°€ν•  μ μλ‹¤. μ΄λ ‡κ² κ°’μ„ μ¶”κ°€ν•κ³  λ‹¤μ‹ GET λ©”μ„λ“λ΅ μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈμΈ `/note`λ¥Ό νΈμ¶ν•λ©΄ λ‹¤μκ³Ό κ°™μ€ κ²°κ΄κ°’μ΄ ν™•μΈλλ‹¤.

<br>

```json
{
  "description": "μ„¤λ… λ¶€λ¶„μ„ κΈ°μ…ν•λ‹¤."
}
```

<br>

μ΄λ²μ—λ” `@DeleteOperation` μ–΄λ…Έν…μ΄μ…μ΄ μ„ μ–Έλ λ©”μ„λ“λ¥Ό νΈμ¶ν•΄ λ³΄κ² λ‹¤. `@DeleteOperation` μ–΄λ…Έν…μ΄μ…μ΄ μ„ μ–Έλ λ©”μ„λ“λ” DELETE νΈμ¶μ„ ν†µν•΄ μ‚¬μ©ν•  μ μμΌλ©°, [Query Parameters] μ— κ°’μ„ λ„£μ–΄ νΈμ¶ν•λ‹¤. ν„μ¬ κµ¬μ„±λ λ©”μ„λ“μ—μ„λ” `key` κ°’μ„ λ°›μ•„ `Map`κ°μ²΄μ—μ„ ν•΄λ‹Ή κ°’μ„ μ‚­μ ν•λ” μ‘μ—…μ„ μν–‰ν•κ² λλ‹¤. μ•„λμ™€ κ°™μ΄ νΈμ¶μ„ μ‹λ„ν•λ‹¤.

<br>

![image](https://user-images.githubusercontent.com/13410737/183941473-adda824d-9131-46ef-a996-326b617c37a0.png){: .align-center}

<br>

μ„μ™€ κ°™μ΄ νΈμ¶ν•λ©΄ μ•„λμ™€ κ°™μ΄ μ§€μ •ν• ν‚¤ κ°’μ΄ μƒμ λ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μλ‹¤.

μ§€μ¦κΉμ§€μ μ•΅μ¶”μ—μ΄ν„°μ μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈλ¥Ό μƒμ„±ν•΄λ΄¤λ‹¤. μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈλ” μ½”λ“λ΅ κµ¬ν„λκΈ° λ•λ¬Έμ— λ”μ± ν™•μ¥μ„± μλ” κΈ°λ¥μ„ κ°λ°ν•  μ μλ‹¤.

<br>

> **π’΅ Tip.** 
>
> μ¤ν”„λ§ λ¶€νΈ μ•΅μ¶”μ—μ΄ν„°μ μμ„Έν• λ‚΄μ©μ€ κ³µμ‹ νμ΄μ§€μ—μ„ ν™•μΈν•  μ μλ‹¤.
>
> - <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html">https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html</a>
