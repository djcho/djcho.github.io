---
title : "[SpringBoot][Chapter11.2] μ•΅μ¶”μ—μ΄ν„° - μ—”λ“ν¬μΈνΈ"
categories:
- SpringBoot
tag :
- [SpringBoot, Spring, Java, Intelij, Actuator]
toc: true
toc_sticky : true
published : true
date : 2022-08-10
last_modified_at : 2022-08-10
---





μ¥μ •μ°λ‹μ΄ μ§€μ, [μ¤ν”„λ§λ¶€νΈ ν•µμ‹¬κ°€μ΄λ“ :: μ¤ν”„λ§ λ¶€νΈλ¥Ό ν™μ©ν• μ• ν”λ¦¬μΌ€μ΄μ… κ°λ° μ‹¤λ¬΄] μ±…μ„ μ½κ³  μ •λ¦¬ν• ν•„κΈ°μ…λ‹λ‹¤.π“Ά
{: .notice--warning}





# μ—”λ“ν¬μΈνΈ

μ•΅μ¶”μ—μ΄ν„°μ μ—”λ“ν¬μΈνΈλ” μ• ν”λ¦¬μΌ€μ΄μ…μ λ¨λ‹ν„°λ§μ„ μ‚¬μ©ν•λ” κ²½λ΅μ΄λ‹¤. μ¤ν”„λ§ λ¶€νΈμ—λ” μ—¬λ¬ λ‚΄μ¥ μ—”λ“ν¬μΈνΈκ°€ ν¬ν•¨λΌ μμΌλ©°, μ»¤μ¤ν…€ μ—”λ“ν¬μΈνΈλ¥Ό μ¶”κ°€ν•  μλ„ μλ‹¤. μ•΅ν‘Έμ—μ΄ν„°λ¥Ό μ¶”κ°€ν•λ©΄ κΈ°λ³Έμ μΌλ΅ μ—”λ“ν¬μΈνΈ URLλ΅ `/actuator`κ°€ μ¶”κ°€λλ©° μ΄ λ’¤μ— κ²½λ΅λ¥Ό μ¶”κ°€ν•΄ μƒμ„Έ λ‚΄μ—­μ— μ ‘κ·Όν•λ‹¤. λ§μ•½ `/actuator` κ²½λ΅κ°€ μ•„λ‹ λ‹¤λ¥Έ κ²½λ΅λ¥Ό μ‚¬μ©ν•κ³  μ‹¶λ‹¤λ©΄ μ•„λμ™€ κ°™μ΄ `application.properties`νμΌμ— μ‘μ„±ν•λ‹¤.

<br>

```yaml
management.endpoints.web.base-path=/custom-path
```

<br>

μμ£Ό ν™μ©λλ” μ•΅μ¶”μ—μ΄ν„°μ μ—”λ“ν¬μΈνΈλ” λ‹¤μκ³Ό κ°™λ‹¤.

| ID                 | μ„¤λ…                                                         |
| ------------------ | ------------------------------------------------------------ |
| `auditevents`      | νΈμ¶λ Audit μ΄λ²¤νΈ μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤. `AuditEventRepository` λΉμ΄ ν•„μ”ν•λ‹¤. |
| `beans`            | μ• ν”λ¦¬μΌ€μ΄μ…μ— μλ” λ¨λ“  μ¤ν”„λ§ λΉ λ¦¬μ¤νΈλ¥Ό ν‘μ‹ν•λ‹¤.        |
| `caches`           | μ‚¬μ© κ°€λ¥ν• μΊμ‹λ¥Ό ν‘μ‹ν•λ‹¤.                                 |
| `confitions`       | μλ™ κµ¬μ„± μ΅°κ±΄ λ‚΄μ—­μ„ μƒμ„±ν•λ‹¤.                              |
| `configprops`      | `@ConfigurationProperties`μ μ†μ„± λ¦¬μ¤νΈλ¥Ό ν‘μ‹ν•λ‹¤.         |
| `env`              | μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μ‚¬μ©ν•  μ μλ” ν™κ²½ μ†μ„±μ„ ν‘μ‹ν•λ‹¤.        |
| `health`           | μ• ν”λ¦¬μΌ€μ΄μ…μ μƒνƒ μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤.                         |
| `httptrace`        | κ°€μ¥ μµκ·Όμ— μ΄λ¤„μ§„ 100κ±΄μ μ”μ²­ κΈ°λ΅μ„ ν‘μ‹ν•λ‹¤. `HttpTraceRepository` λΉμ΄ ν•„μ”ν•λ‹¤. |
| `info`             | μ• ν”λ¦¬μΌ€μ΄μ…μ μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤.                              |
| `integrationgraph` | μ¤ν”„λ§ ν†µν•© κ·Έλν”„λ¥Ό ν‘μ‹ν•λ‹¤. spring-integration-core λ¨λ“μ— λ€ν• μμ΅΄μ„±μ„ μ¶”κ°ν•΄μ•Ό λ™μ‘ν•λ‹¤. |
| `loggers`          | μ• ν”λ¦¬μΌ€μ΄μ…μ λ΅κ±° κµ¬μ„±μ„ ν‘μ‹ν•κ³  μμ •ν•λ‹¤.                |
| `metrics`          | μ• ν”λ¦¬μΌ€μ΄μ…μ λ©”νΈλ¦­ μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤.                       |
| `mappings`         | λ¨λ“  `@RequestMapping`μ λ§¤ν•‘ μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤.               |
| `quartz`           | Quartz μ¤μΌ€μ¤„λ¬ μ‘μ—…μ— λ€ν• μ •λ³΄λ¥Ό ν‘μ‹ν•λ‹¤.                 |
| `scheduledtasks`   | μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ μμ•½λ μ‘μ—…μ„ ν‘μ‹ν•λ‹¤.                     |
| `sessions`         | μ¤ν”„λ§ μ„Έμ… μ €μ¥μ†μ—μ„ μ‚¬μ©μμ μ„Έμ…μ„ κ²€μƒ‰ν•κ³  μ‚­μ ν•  μ μλ‹¤. μ¤ν”„λ§ μ„Έμ…μ„ μ‚¬μ©ν•λ” μ„λΈ”λ¦Ώ κΈ°λ° μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν•„μ”ν•λ‹¤. |
| `shutdown`         | μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ •μƒμ μΌλ΅ μΆ…λ£ν•  μ μλ‹¤. κΈ°λ³Έκ°’μ€ λΉ„ν™μ„±ν™” μƒνƒμ΄λ‹¤. |
| `startup`          | μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ‹μ‘λ  λ• μμ§‘λ μ‹μ‘ λ‹¨κ³„ λ°μ΄ν„°λ¥Ό ν‘μ‹ν•λ‹¤.<br />`BufferingApplicationStartup`μΌλ΅ κµ¬μ„±λ μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ ν•„μ”ν•λ‹¤. |
| `threaddump`       | μ¤λ λ“ λ¤ν”„λ¥Ό μν–‰ν•λ‹¤.                                      |

<br>

λ§μ•½ Spring MVC, Spring WebFlus, jerseyμ„ μ‚¬μ©ν•λ‹¤λ©΄ μ¶”κ°€λ΅ λ‹¤μκ³Ό κ°™μ€ μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

<br>

| ID           | μ„¤λ…                                                         |
| ------------ | ------------------------------------------------------------ |
| `heapdump`   | ν™ λ¤ν”„ νμΌμ„ λ°ν™ν•λ‹¤. ν•«μ¤ν(HotSpot) VM μƒμ—μ„ hprof ν¬λ§·μ νμΌμ΄ λ°ν™λλ©°, OpenJ9JVMμ—μ„λ” PHD ν¬λ§· νμΌμ„ λ°ν™ν•λ‹¤. |
| `jolokia`    | Jolokiaκ°€ ν΄λμ¤ν¨μ¤μ— μμ„ λ• HTTPλ¥Ό ν†µν•΄ JMX λΉμ„ ν‘μ‹ν•λ‹¤. jolokia-core λ¨λ“μ— λ€ν• μμ΅΄μ„± μ¶”κ°€κ°€ ν•„μ”ν•λ©°, WebFluxμ—μ„λ” μ‚¬μ©ν•  μ μ—†λ‹¤. |
| `logfile`    | `logging.file.name` λλ” `logging.file.path`μ†μ„±μ΄ μ„¤μ •λΌ μλ” κ²½μ° λ΅κ·Έ νμΌμ λ‚΄μ©μ„ λ°ν™ν•λ‹¤. |
| `Prometheus` | Prometheus μ„λ²„μ—μ„ μ¤ν¬λ©ν•  μ μλ” ν•μ‹μΌλ΅ λ©”νΈλ¦­μ„ ν‘μ‹ν•λ‹¤. Micrometer-registry-prometheus λ¨λ“μ μμ΅΄μ„± μ¶”κ°€κ°€ ν•„μ”ν•λ‹¤. |

<br>

μ—”λ“ν¬μΈνΈ ν™μ„±ν™” μ—¬λ¶€μ™€ λ…Έμ¶ μ—¬λ¶€λ¥Ό μ„¤μ •ν•  μ μλ‹¤. ν™μ„±ν™”λ” κΈ°λ¥ μμ²΄λ¥Ό ν™μ„±ν™”ν•  κ²ƒμΈμ§€λ¥Ό κ²°μ •ν•λ” κ²ƒμΌλ΅, λΉ„ν™μ„±ν™”λ μ—”νΈν¬μΈνΈλ” μ• ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈμ—μ„ μ™„μ „ν μ κ±°λλ‹¤. μ—”νΈν¬μΈνΈλ¥Ό ν™μ„±ν™”ν•λ ¤λ©΄ `application.propertis` νμΌμ— μ†μ„±μ„ μ¶”κ°€ν•λ©΄ λλ‹¤. κ°„λ‹¨ν• μλ΅ μ•„λμ™€ κ°™μ΄ μ‘μ„±ν•  μ μλ‹¤.

<br>

```yaml
## μ—”λ“ν¬μΈνΈ ν™μ„±ν™”
management.endpoint.shutdown.enabled=true
management.endpoint.caches.enabled=true
```

<br>

μ„ μμ μ μ„¤μ •μ€ μ—”λ“ν¬μΈνΈμ `shutdown`κΈ°λ¥μ€ ν™μ„±ν™”ν•κ³  `caches` κΈ°λ¥μ€ λΉ„ν™μ„±ν™”ν•κ² λ‹¤λ” μλ―Έμ΄λ‹¤.

λν• μ•΅μ¶”μ—μ΄ν„° μ„¤μ •μ„ ν†µν•΄ κΈ°λ¥ ν™μ„±ν™”/λΉ„ν™μ„±ν™”κ°€ μ•„λ‹λΌ μ—”λ“ν¬μΈνΈμ λ…Έμ¶ μ—¬λ¶€λ§ μ„¤μ •ν•λ” κ²ƒλ„ κ°€λ¥ν•λ‹¤. λ…Έμ¶ μ—¬λ¶€λ” JMXλ¥Ό ν†µν• λ…Έμ¶κ³Ό HTTPλ¥Ό ν†µν• λ…Έμ¶μ΄ μμ–΄ μ•„λμ™€ κ°™μ΄ μ„¤μ •μ΄ κµ¬λ¶„λλ‹¤.

<br>

```yaml
## μ—”λ“ν¬μΈνΈ λ…Έμ¶ μ„¤μ •
## HTTP μ„¤μ •
management.endpoints.web.exposure.include=*
management.endpoints.web.exposure.exclude=threaddump, heapdump

## JMX μ„¤μ •
management.endpoints.jmx.exposure.include=*
management.endpoints.jmx.exposure.exclude=threaddump, heapdump
```

<br>

μ„ μ„¤μ •μ„ ν•΄μ„ν•λ©΄ webκ³Ό jmx ν™κ²½μ—μ„ μ—”λ“ν¬μΈνΈλ¥Ό μ „μ²΄μ μΌλ΅ λ…Έμ¶ν•λ©°, μ¤λ λ“ λ¤ν”„(thread dump)μ™€ ν™ λ¤ν”„(heap dump) κΈ°λ¥μ€ μ μ™Έν•κ² λ‹¤λ” μλ―Έμ΄λ‹¤.

μ—”λ“ν¬μΈνΈλ” μ• ν”λ¦¬μΌ€μ΄μ…μ— κ΄€ν• λ―Όκ°ν• μ •λ³΄λ¥Ό ν¬ν•¨ν•κ³  μμΌλ―€λ΅ λ…Έμ¶ μ„¤μ •μ„ μ‹ μ¤‘ν•κ² κ³ λ ¤ν•΄μ•Όν•λ‹¤. νΉνλ‚ κ³µκ°μ μΌλ΅ λ…Έμ¶λλ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄λΌλ©΄ λ”μ± μ‹ μ¤‘ν κ³ λ ¤ν•΄μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. λ…Έμ¶ μ„¤μ •μ— λ€ν• κΈ°λ³Έκ°’μ€ μ•„λ ν‘μ™€ κ°™λ‹¤.

<br>

| ID                 | JMX       | WEB  |
| ------------------ | --------- | ---- |
| `auditevents`      | O         | X    |
| `bean`             | O         | X    |
| `caches`           | O         | X    |
| `conditions`       | O         | X    |
| `configprops`      | O         | X    |
| `env`              | O         | X    |
| `flyway`           | O         | X    |
| `health`           | O         | O    |
| `heapdump`         | ν•΄λ‹Ή μ—†μ | X    |
| `httptrace`        | O         | X    |
| `info`             | O         | X    |
| `integrationgraph` | O         | X    |
| `jolokia`          | ν•΄λ‹Ή μ—†μ | X    |
| `logfile`          | ν•΄λ‹Ή μ—†μ | X    |
| `loggers`          | O         | X    |
| `liquibase`        | O         | X    |
| `metrics`          | O         | X    |
| `mappings`         | O         | X    |
| `Prometheus`       | ν•΄λ‹Ή μ—†μ |      |
| `quarts`           | O         | X    |
| `scheduledtasks`   | O         | X    |
| `sessions`         | O         | X    |
| `shutdown`         | O         | X    |
| `startup`          | O         | X    |
| `threaddump`       | O         | X    |
